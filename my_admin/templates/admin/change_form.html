{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}


{% block admin_change_form_document_ready %}

{{ block.super }}

<script>
    $(function(){        
        document.querySelector('#payment_form select[name="subscription"]').onchange=function() {            
            let subscription_id = this.value;
            let el_due_amount = $('.field-price_charged .readonly');            
            if(!subscription_id){
                el_due_amount.val(0);
                return;
            }
            let options = {
                beforeSend: function(a, b){
                    //console.log(b.url);
                },
                url: '/subscription/get_due_amount',
                data : {subscription_id: subscription_id},
                success:function(data){
                    el_due_amount.html(data);
                },
                error:function(er){
                    console.log(er);
                }
            };
            $.ajax(options);
        }
    });

</script>

{% endblock %}

